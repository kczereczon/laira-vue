<template>
  <div class="bg-white h-full w-full">
    <div class="rounded-b-lg w-full sticky top-0 z-50">
      <div class="bg-blue-200 p-3 rounded-b-lg">
        <svg
          width="225"
          height="60"
          viewBox="0 0 225 60"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <circle cx="30" cy="30" r="30" fill="#1E3A8A" />
          <path
            d="M12 44H32.9302M12 44L17.3023 33.6094M12 44L37.0879 22.9453M20.9302 26.5L32.9302 44M20.9302 26.5L37.0879 22.9453M20.9302 26.5L25.3953 17.75M20.9302 26.5L17.3023 33.6094M32.9302 44L40.064 28.6875M32.9302 44L25.3953 17.75M32.9302 44H42.9767M40.064 28.6875L48 44H42.9767M40.064 28.6875L37.0879 22.9453M40.064 28.6875L25.3953 17.75M37.0879 22.9453L29.8605 9L25.3953 17.75M42.9767 44L17.3023 33.6094"
            stroke="#93C5FD"
          />
          <path
            d="M91.8253 12.8848C93.2077 9.2752 93.8989 6.8176 93.8989 5.512C93.8989 4.2064 93.5725 3.5152 92.9197 3.4384C91.1149 3.4384 89.2333 6.3376 87.2749 12.136C85.3549 17.896 83.8381 23.8864 82.7245 30.1072C81.6493 36.2896 81.1117 40.6672 81.1117 43.24C81.1117 47.5792 82.1869 49.7488 84.3373 49.7488C84.3373 50.0176 84.1645 50.2864 83.8189 50.5552C83.4733 50.824 83.0701 50.9584 82.6093 50.9584C79.4605 50.9584 77.8861 48.136 77.8861 42.4912C77.8861 40.4176 78.2701 37.2496 79.0381 32.9872C79.8061 28.6864 80.8045 24.1936 82.0333 19.5088C83.2621 14.824 84.8557 10.7536 86.8141 7.2976C88.7725 3.8032 90.7693 2.056 92.8045 2.056C94.4173 2.056 95.2237 3.0736 95.2237 5.1088C95.2237 6.6448 94.7437 8.7952 93.7837 11.56C91.9405 16.936 89.2909 22.312 85.8349 27.688C84.9133 29.1088 84.0877 30.2608 83.3581 31.144C83.1661 31.3744 83.0701 31.2976 83.0701 30.9136C83.0317 30.184 83.2045 29.5504 83.5885 29.0128C86.7373 24.2896 89.4829 18.9136 91.8253 12.8848ZM94.4644 49.0576C91.4308 49.0576 89.914 46.7728 89.914 42.2032C89.914 39.5536 90.6052 36.6544 91.9876 33.5056C93.9076 29.2432 96.346 26.4592 99.3028 25.1536C100.34 24.7312 101.376 24.52 102.413 24.52C103.488 24.52 104.333 24.8272 104.948 25.4416C105.562 26.056 105.869 26.7472 105.869 27.5152C105.869 27.8608 105.677 28.0336 105.293 28.0336C104.948 27.9952 104.775 27.8032 104.775 27.4576C104.775 27.112 104.583 26.8048 104.199 26.536C103.853 26.2288 103.335 26.0752 102.644 26.0752C100.224 26.0752 98.0356 28.2448 96.0772 32.584C94.234 36.616 93.3124 40.4368 93.3124 44.0464C93.3124 46.2736 93.7924 47.3872 94.7524 47.3872C95.7508 47.3872 96.9412 46.5616 98.3236 44.9104C99.7444 43.2208 101.05 41.2624 102.24 39.0352C104.813 34.3504 106.33 31.336 106.791 29.992C107.252 28.648 107.751 27.976 108.288 27.976C109.248 27.976 109.728 28.7824 109.728 30.3952C109.728 30.8944 109.671 31.4704 109.556 32.1232C108.288 38.2672 107.597 41.8192 107.482 42.7792C107.405 43.7392 107.367 44.4304 107.367 44.8528C107.367 46.696 107.808 47.6176 108.692 47.6176C109.69 47.6176 111.092 46.2928 112.896 43.6432C114.701 40.9936 116.256 38.344 117.562 35.6944L119.52 31.72H121.076C120.845 32.1808 120.538 32.8144 120.154 33.6208C119.808 34.3888 119.098 35.7904 118.023 37.8256C116.948 39.8224 115.911 41.5888 114.912 43.1248C113.952 44.6608 112.858 46.0624 111.629 47.3296C110.439 48.5584 109.402 49.1728 108.519 49.1728C105.677 49.1728 104.256 47.0992 104.256 42.952C104.256 41.5696 104.41 39.9568 104.717 38.1136H104.314C100.397 45.4096 97.114 49.0576 94.4644 49.0576ZM125.593 14.4976C126.476 14.4976 126.918 15.0928 126.918 16.2832C126.918 17.4736 126.342 18.4336 125.19 19.1632C124.614 19.5472 124.114 19.7392 123.692 19.7392C123.078 19.7392 122.713 19.5472 122.598 19.1632L122.54 18.9904C122.886 18.9904 123.135 18.6256 123.289 17.896C123.442 17.128 123.673 16.3792 123.98 15.6496C124.326 14.8816 124.863 14.4976 125.593 14.4976ZM121.906 47.6176C122.905 47.6176 124.306 46.2928 126.111 43.6432C127.916 40.9936 129.471 38.344 130.777 35.6944L132.735 31.72H134.29C134.06 32.1808 133.753 32.8144 133.369 33.6208C133.023 34.3888 132.313 35.7904 131.238 37.8256C130.162 39.8224 129.126 41.5888 128.127 43.1248C127.167 44.6608 126.073 46.0624 124.844 47.3296C123.654 48.5584 122.617 49.1728 121.734 49.1728C118.892 49.1728 117.471 47.3296 117.471 43.6432C117.471 40.8784 118.258 36.3856 119.833 30.1648C119.986 29.512 120.102 29.0128 120.178 28.6672C120.294 28.3216 120.409 27.88 120.524 27.3424C120.639 26.7664 120.754 26.248 120.87 25.7872C121.062 24.9808 121.407 24.5776 121.906 24.5776C122.598 24.5776 123.097 25.0768 123.404 26.0752C123.558 26.536 123.634 27.0928 123.634 27.7456C123.634 28.3984 123.558 29.0896 123.404 29.8192C123.25 30.5104 123.001 31.5472 122.655 32.9296C122.31 34.312 122.041 35.4448 121.849 36.328C121.657 37.2112 121.446 38.2864 121.215 39.5536C120.793 41.6656 120.582 43.5472 120.582 45.1984C120.582 46.8112 121.023 47.6176 121.906 47.6176ZM131.842 49C130.767 49 130.229 48.1744 130.229 46.5232C130.229 45.64 131.304 39.208 133.455 27.2272C133.608 26.4208 133.954 26.0176 134.492 26.0176C135.183 26.0176 135.701 26.5168 136.047 27.5152C136.239 28.0528 136.335 28.648 136.335 29.3008C136.335 29.9152 136.258 30.5872 136.104 31.3168L135.183 36.04H135.471C138.773 28.36 141.807 24.52 144.572 24.52C146.108 24.52 147.125 25.2688 147.624 26.7664C147.816 27.3424 147.912 28.0144 147.912 28.7824C147.912 29.512 147.701 30.3184 147.279 31.2016C146.549 32.6992 145.455 33.448 143.996 33.448C143.688 33.448 143.439 33.3712 143.247 33.2176C143.093 33.064 142.997 32.8528 142.959 32.584C143.266 32.584 143.669 32.0272 144.168 30.9136C144.668 29.7616 144.956 28.7056 145.032 27.7456C145.109 26.7856 144.783 26.2288 144.053 26.0752C142.709 26.0752 141.116 27.8224 139.272 31.3168C137.429 34.8112 135.951 38.152 134.837 41.3392C133.724 44.5264 133.071 46.6 132.879 47.56C132.687 48.52 132.341 49 131.842 49ZM152.824 49.0576C149.79 49.0576 148.273 46.7728 148.273 42.2032C148.273 39.5536 148.965 36.6544 150.347 33.5056C152.267 29.2432 154.705 26.4592 157.662 25.1536C158.699 24.7312 159.736 24.52 160.773 24.52C161.848 24.52 162.693 24.8272 163.307 25.4416C163.921 26.056 164.229 26.7472 164.229 27.5152C164.229 27.8608 164.037 28.0336 163.653 28.0336C163.307 27.9952 163.134 27.8032 163.134 27.4576C163.134 27.112 162.942 26.8048 162.558 26.536C162.213 26.2288 161.694 26.0752 161.003 26.0752C158.584 26.0752 156.395 28.2448 154.437 32.584C152.593 36.616 151.672 40.4368 151.672 44.0464C151.672 46.2736 152.152 47.3872 153.112 47.3872C154.11 47.3872 155.301 46.5616 156.683 44.9104C158.104 43.2208 159.409 41.2624 160.6 39.0352C163.173 34.3504 164.689 31.336 165.15 29.992C165.611 28.648 166.11 27.976 166.648 27.976C167.608 27.976 168.088 28.7824 168.088 30.3952C168.088 30.8944 168.03 31.4704 167.915 32.1232C166.648 38.2672 165.957 41.8192 165.841 42.7792C165.765 43.7392 165.726 44.4304 165.726 44.8528C165.726 46.696 166.168 47.6176 167.051 47.6176C168.049 47.6176 169.451 46.2928 171.256 43.6432C173.061 40.9936 174.616 38.344 175.921 35.6944L177.88 31.72H179.435C179.205 32.1808 178.897 32.8144 178.513 33.6208C178.168 34.3888 177.457 35.7904 176.382 37.8256C175.307 39.8224 174.27 41.5888 173.272 43.1248C172.312 44.6608 171.217 46.0624 169.989 47.3296C168.798 48.5584 167.761 49.1728 166.878 49.1728C164.037 49.1728 162.616 47.0992 162.616 42.952C162.616 41.5696 162.769 39.9568 163.077 38.1136H162.673C158.757 45.4096 155.473 49.0576 152.824 49.0576Z"
            fill="#1E3A8A"
          />
        </svg>
      </div>
      <div class="px-2 py-4 bg-white rounded-b-lg">
        <button
          class="bg-blue-900 text-blue-200 py-2 w-full rounded text-lg font-bold"
        >
          Zaplanuj wycieczkÄ™
        </button>
      </div>
    </div>
    <PlacesContainer :places="places" title="W twojej okolicy"/>
    <PlacesContainer :places="suggested" title="Podobne do ostatnio ogladanych"/>

    <PlacesContainer v-for="tag in tags" :key="tag.id" :places="tag.data" :title="'#'+tag.tag"/>
  </div>
</template>

<script>
import axios from "axios";
import PlacesContainer from "../components/PlacesContainer"
export default {
  components: {
    PlacesContainer
  },
  data: () => {
    return {
      places: [],
      suggested: [],
      tags: []
    }
  },
  async mounted () {
    this.places = (await axios.get('http://192.168.1.67:3333/api/places/around', {headers: {'auth-token': this.$store.getters.auth}})).data;
    this.suggested = (await axios.get('http://192.168.1.67:3333/api/places/suggested', {headers: {'auth-token': this.$store.getters.auth}})).data;
    let tags = (await axios.get('http://192.168.1.67:3333/api/places/users/tags', {headers: {'auth-token': this.$store.getters.auth}})).data;

    tags.forEach(async (tag, index) => {
      let data = (await axios.get(`http://192.168.1.67:3333/api/places/byTag/${tag}`, {headers: {'auth-token': this.$store.getters.auth}})).data;
      this.tags.push({id: index, tag: tag, data: data});
    });
  },
};
</script>

<style>
</style>